# DO NOT EDIT - This file is being maintained by Chef

<% [80, 443].each do |port| -%>
<VirtualHost *:<%= port %>>

  ServerName donate.openstreetmap.org
  ServerAlias donate.openstreetmap.com
  ServerAlias donate.openstreetmap.net
  ServerAlias donate.osm.org

  ServerAdmin webmaster@openstreetmap.org

<% if port == 80 -%>
  RedirectPermanent /.well-known/acme-challenge/ http://acme.openstreetmap.org/.well-known/acme-challenge/
  RedirectPermanent / https://donate.openstreetmap.org/
<% end -%>
<% if port == 443 -%>
  SSLEngine on
  SSLCertificateFile /etc/ssl/certs/donate.openstreetmap.org.pem
  SSLCertificateKeyFile /etc/ssl/private/donate.openstreetmap.org.key

  RedirectMatch . https://supporting.openstreetmap.org/
  <% end -%>

  CustomLog /var/log/apache2/donate.openstreetmap.org-access.log combined
  ErrorLog /var/log/apache2/donate.openstreetmap.org-error.log

</VirtualHost>

<% end -%>
